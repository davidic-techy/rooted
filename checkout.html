<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROOTED — Secure Terminal</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* =========================================
           1. CORE VARIABLES & RESETS
           ========================================= */
        :root {
            --earth-brown: #5C4033; --deep-earth: #3D2817; --off-white: #F5F1E8;
            --pure-white: #FFFFFF; --accent-gold: #D4A574;
            --border-light: rgba(245, 241, 232, 0.15); --border-dark: rgba(61, 40, 23, 0.2);
            --font-primary: 'Inter', sans-serif; --font-tech: 'Space Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--deep-earth); color: var(--off-white); font-family: var(--font-primary); overflow-x: hidden; -webkit-font-smoothing: antialiased; }
        a { text-decoration: none; color: inherit; }
        input, textarea, button { font-family: inherit; }

        .global-grain { position: fixed; inset: 0; pointer-events: none; z-index: 9999; background-image: url('https://upload.wikimedia.org/wikipedia/commons/7/76/Noise_grain.png'); opacity: 0.05; animation: grainMove 1s steps(2) infinite; }
        @keyframes grainMove { 0%, 100% { transform: translate(0,0); } 50% { transform: translate(-5%, -5%); } }

        /* =========================================
           2. MINIMAL SECURE HEADER
           ========================================= */
        .secure-header {
            padding: 2rem 5%; border-bottom: 1px solid var(--border-light);
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(61, 40, 23, 0.98); backdrop-filter: blur(10px);
            position: sticky; top: 0; z-index: 1000;
        }
        .logo-main { font-weight: 900; font-size: 1.5rem; letter-spacing: 0.25em; line-height: 1; margin-right: -0.25em; color: var(--off-white); }
        .return-link { font-family: var(--font-tech); font-size: 0.65rem; font-weight: 700; letter-spacing: 0.2em; color: var(--accent-gold); display: flex; align-items: center; gap: 8px; transition: 0.3s; }
        .return-link:hover { transform: translateX(-5px); color: var(--off-white); }

        /* =========================================
           3. TERMINAL GRID LAYOUT
           ========================================= */
        .terminal-container {
            display: grid; grid-template-columns: 1.2fr 0.8fr;
            max-width: 1400px; margin: 0 auto; min-height: calc(100vh - 90px);
        }

        /* --- LEFT: DATA HARVESTING --- */
        .form-section { padding: 4rem 5%; border-right: 1px solid var(--border-light); }
        
        .section-title { font-family: var(--font-tech); font-size: 0.8rem; font-weight: 700; letter-spacing: 0.2em; color: var(--accent-gold); margin-bottom: 2rem; display: flex; align-items: center; gap: 10px; }
        .section-title::before { content: ''; width: 20px; height: 1px; background: var(--accent-gold); }

        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 4rem; }
        .full-width { grid-column: 1 / -1; }
        
        .input-group { display: flex; flex-direction: column; gap: 0.5rem; position: relative; }
        .input-group label { font-family: var(--font-tech); font-size: 0.65rem; font-weight: 700; letter-spacing: 0.15em; color: rgba(245, 241, 232, 0.6); }
        .input-group input, .input-group textarea {
            background: transparent; border: none; border-bottom: 1px solid var(--border-light);
            color: var(--off-white); font-size: 1rem; padding: 0.8rem 0; outline: none; transition: 0.3s;
        }
        .input-group input:focus, .input-group textarea:focus { border-color: var(--accent-gold); }
        
        /* Payment Block */
        .payment-box { background: rgba(255,255,255,0.02); border: 1px solid var(--border-light); padding: 2rem; margin-bottom: 3rem; position: relative; overflow: hidden; }
        .pb-title { font-weight: 800; font-size: 1rem; letter-spacing: 0.1em; margin-bottom: 1rem; text-transform: uppercase; }
        .pb-desc { font-size: 0.85rem; opacity: 0.7; line-height: 1.6; margin-bottom: 2rem; }
        .bank-details { font-family: var(--font-tech); font-size: 0.85rem; line-height: 2.2; color: var(--accent-gold); }
        .bank-details strong { color: var(--off-white); font-weight: 700; letter-spacing: 0.05em; }

        /* WhatsApp Cyber Button */
        .whatsapp-btn {
            position: relative; display: flex; width: 100%; height: 75px; background: transparent; border: 1px solid var(--border-light); cursor: pointer; overflow: hidden; margin-top: 2rem;
        }
        .wa-bg { position: absolute; inset: 0; background: #25D366; transform: scaleY(0); transform-origin: bottom; transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1); z-index: 1; }
        .wa-text-wrap { position: relative; z-index: 2; width: 100%; height: 100%; display: flex; flex-direction: column; transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1); }
        .wa-row { height: 75px; display: flex; align-items: center; justify-content: center; gap: 15px; font-weight: 800; font-size: 0.85rem; letter-spacing: 0.15em; color: var(--off-white); flex-shrink: 0; text-transform: uppercase; }
        .whatsapp-btn:hover .wa-bg { transform: scaleY(1); }
        .whatsapp-btn:hover .wa-text-wrap { transform: translateY(-75px); }
        .whatsapp-btn:hover { border-color: transparent; }

        /* --- RIGHT: ORDER SUMMARY --- */
        .summary-section { padding: 4rem 5%; background: rgba(0,0,0,0.2); display: flex; flex-direction: column; }
        .summary-items { flex-grow: 1; display: flex; flex-direction: column; gap: 1.5rem; margin-bottom: 3rem; }
        
        .s-item { display: grid; grid-template-columns: 80px 1fr auto; gap: 1.5rem; align-items: center; border-bottom: 1px solid var(--border-light); padding-bottom: 1.5rem; }
        .s-img { width: 100%; aspect-ratio: 4/5; object-fit: cover; background: #EAE6DD; filter: sepia(0.1) grayscale(0.2); }
        .s-name { font-weight: 800; font-size: 0.85rem; letter-spacing: 0.05em; margin-bottom: 5px; text-transform: uppercase; }
        .s-meta { font-family: var(--font-tech); font-size: 0.65rem; color: var(--accent-gold); letter-spacing: 0.1em; }
        .s-price { font-family: var(--font-tech); font-size: 0.9rem; font-weight: 700; }

        .receipt-breakdown { font-family: var(--font-tech); font-size: 0.75rem; letter-spacing: 0.1em; display: flex; flex-direction: column; gap: 1rem; border-top: 1px solid var(--border-light); padding-top: 2rem; }
        .r-row { display: flex; justify-content: space-between; opacity: 0.7; }
        .r-total { display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: 700; color: var(--accent-gold); margin-top: 1rem; opacity: 1; padding-top: 1rem; border-top: 1px dashed var(--border-light); }

        /* Scroll Reveal Utility */
        .reveal-elem { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease, transform 0.8s ease; }
        .reveal-elem.is-visible { opacity: 1; transform: translateY(0); }

        /* =========================================
           4. RESPONSIVE PERFECTION
           ========================================= */
        @media (max-width: 1024px) {
            .terminal-container { grid-template-columns: 1fr; }
            .form-section { border-right: none; padding: 4rem 5%; }
            /* On tablet/mobile, we swap the visual order so Summary is on top */
            .terminal-container { display: flex; flex-direction: column; }
            .summary-section { order: 1; border-bottom: 1px solid var(--border-light); }
            .form-section { order: 2; }
        }

        @media (max-width: 768px) {
            .secure-header { padding: 1.5rem 5%; }
            .form-grid { grid-template-columns: 1fr; gap: 1.5rem; }
            .summary-section { padding: 3rem 1.5rem; }
            .form-section { padding: 3rem 1.5rem; }
            .s-item { grid-template-columns: 60px 1fr auto; gap: 1rem; }
            .whatsapp-btn { height: 70px; }
            .wa-row { height: 70px; font-size: 0.75rem; }
        }
    </style>
</head>
<body>

    <div class="global-grain"></div>

    <header class="secure-header">
        <a href="products.html" class="return-link">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            RETURN TO ARCHIVE
        </a>
        <a href="index.html" class="logo-main">ROOTED</a>
        <div style="width: 100px;"></div> </header>

    <main class="terminal-container">
        
        <div class="form-section reveal-elem">
            <div class="section-title">01 // SHIPPING DESTINATION</div>
            <div class="form-grid">
                <div class="input-group full-width">
                    <label>FULL NAME</label>
                    <input type="text" id="c-name" placeholder="Enter your full legal name" required>
                </div>
                <div class="input-group">
                    <label>EMAIL ADDRESS</label>
                    <input type="email" id="c-email" placeholder="For receipt & tracking" required>
                </div>
                <div class="input-group">
                    <label>WHATSAPP NUMBER</label>
                    <input type="tel" id="c-phone" placeholder="Active line only" required>
                </div>
                <div class="input-group full-width">
                    <label>DELIVERY ADDRESS</label>
                    <textarea id="c-address" rows="2" placeholder="Street address, apartment, suite" required></textarea>
                </div>
                <div class="input-group">
                    <label>CITY</label>
                    <input type="text" id="c-city" placeholder="e.g. Lekki" required>
                </div>
                <div class="input-group">
                    <label>STATE / REGION</label>
                    <input type="text" id="c-state" placeholder="e.g. Lagos" required>
                </div>
            </div>

            <div class="section-title">02 // SECUREMENT PROTOCOL</div>
            <div class="payment-box">
                <div class="pb-title">DIRECT BANK TRANSFER</div>
                <p class="pb-desc">To secure your physical artifact, please transfer the exact total to the coordinates below. Upon submission, your encrypted order data will be transmitted to our WhatsApp terminal for receipt verification.</p>
                <div class="bank-details">
                    BANK INSTITUTION: <br><strong>GUARANTY TRUST BANK (GTB)</strong><br><br>
                    ACCOUNT NUMBER: <br><strong>0123456789</strong><br><br>
                    ACCOUNT NAME: <br><strong>ROOTED APPAREL LTD</strong>
                </div>
            </div>

            <button class="whatsapp-btn" onclick="finalizeOrder()">
                <div class="wa-bg"></div>
                <div class="wa-text-wrap">
                    <div class="wa-row">TRANSMIT ORDER TO WHATSAPP</div>
                    <div class="wa-row hover-text">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                        INITIATE TRANSFER VERIFICATION
                    </div>
                </div>
            </button>
        </div>

        <div class="summary-section reveal-elem">
            <div class="section-title">ORDER SUMMARY</div>
            
            <div class="summary-items" id="summary-container">
                </div>

            <div class="receipt-breakdown">
                <div class="r-row">
                    <span>SUBTOTAL</span>
                    <span id="receipt-subtotal">₦0</span>
                </div>
                <div class="r-row" style="color: var(--accent-gold);">
                    <span>SHIPPING</span>
                    <span>COMPLIMENTARY</span>
                </div>
                <div class="r-total">
                    <span>TOTAL</span>
                    <span id="receipt-total">₦0</span>
                </div>
            </div>
        </div>

    </main>

    <script>
        // Physics logic for smooth reveal
        document.addEventListener('DOMContentLoaded', () => {
            const observerOptions = { root: null, rootMargin: '0px 0px -50px 0px', threshold: 0.1 };
            const scrollObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target); 
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.reveal-elem').forEach(elem => {
                scrollObserver.observe(elem);
            });
        });

        // Application Logic
        let cart = JSON.parse(localStorage.getItem('rooted_cart')) || [];
        let orderTotal = 0;

        function loadSummary() {
            const container = document.getElementById('summary-container');
            const subEl = document.getElementById('receipt-subtotal');
            const totalEl = document.getElementById('receipt-total');

            if(cart.length === 0) {
                container.innerHTML = "<p style='opacity: 0.5; font-family: var(--font-tech); font-size: 0.8rem;'>YOUR ARCHIVE IS EMPTY. <a href='products.html' style='color:var(--accent-gold); text-decoration:underline;'>RETURN TO SHOP</a></p>";
                document.querySelector('.whatsapp-btn').style.opacity = '0.5';
                document.querySelector('.whatsapp-btn').style.pointerEvents = 'none';
                return;
            }

            container.innerHTML = cart.map(item => {
                let itemTotal = item.price * item.qty;
                orderTotal += itemTotal;
                let imgSrc = (item.images && item.images[0]) ? item.images[0] : 'https://images.unsplash.com/photo-1552374196-1ab2a1c593e8?w=800';

                return `
                    <div class="s-item">
                        <img src="${imgSrc}" class="s-img">
                        <div>
                            <div class="s-name">${item.name}</div>
                            <div class="s-meta">SIZE: ${item.size} // QTY: ${item.qty}</div>
                        </div>
                        <div class="s-price">₦${itemTotal.toLocaleString()}</div>
                    </div>
                `;
            }).join('');

            subEl.innerText = `₦${orderTotal.toLocaleString()}`;
            totalEl.innerText = `₦${orderTotal.toLocaleString()}`;
        }

        function finalizeOrder() {
            if(cart.length === 0) return;

            const name = document.getElementById('c-name').value;
            const email = document.getElementById('c-email').value;
            const phone = document.getElementById('c-phone').value;
            const address = document.getElementById('c-address').value;
            const city = document.getElementById('c-city').value;
            const state = document.getElementById('c-state').value;

            if(!name || !phone || !address || !city || !state) {
                alert("SYSTEM HALT: PLEASE COMPLETE ALL REQUIRED SHIPPING DETAILS.");
                return;
            }

            // Generate unique order ID
            const orderId = "RT-" + Math.floor(10000 + Math.random() * 90000);
            
            // Format Items for WhatsApp
            let orderText = cart.map(item => `• ${item.qty}x ${item.name} [Size: ${item.size}] - ₦${(item.price * item.qty).toLocaleString()}`).join('%0A');

            // Construct WhatsApp Message
            const msg = `*ROOTED SECUREMENT TERMINAL* %0A` +
                        `Order ID: ${orderId} %0A%0A` +
                        `*ARTIFACTS SELECTED:* %0A${orderText} %0A%0A` +
                        `*TOTAL TRANSFER: ₦${orderTotal.toLocaleString()}* (Free Shipping)%0A` +
                        `----------------------- %0A` +
                        `*SHIPPING DATA:* %0A` +
                        `Name: ${name} %0A` +
                        `Email: ${email} %0A` +
                        `Phone: ${phone} %0A` +
                        `Location: ${address}, ${city}, ${state} %0A%0A` +
                        `_I have completed the transfer. I will attach my receipt below._`;

            // Clear Cart upon successful transition to WhatsApp
            localStorage.removeItem('rooted_cart');
            
            // Redirect to WhatsApp (REPLACE WITH YOUR BUSINESS NUMBER)
            const whatsappNumber = "2349035010746"; 
            window.location.href = `https://wa.me/${whatsappNumber}?text=${msg}`;
        }

        loadSummary();
    </script>
</body>
</html>